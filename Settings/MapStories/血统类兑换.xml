<Stories><List>
	<Story Name="WX_XTL" Parent="BaseFillingStory">
		<DisplayName>万族战场（一阶）</DisplayName>
		<Desc>[img]Spr/Building/ZSKJ/WJZC.png[/img]</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>丘岭矮人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_QLAR");
				</OKResult>
			</li>
			<li>
				<Display>狂血兽人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_KXSR");
				</OKResult>
			</li>
			<li>
				<Display>吸血鬼血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XXGXT");
				</OKResult>
			</li>
			<li>
				<Display>冰原巨人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_BSJRXT");
				</OKResult>
			</li>
			<li>
				<Display>堕天使血统</Display>
				<OKResult>
				me:TriggerStory("XTL_DTSXT");
				</OKResult>
			</li>
			<li>
				<Display>圣天使血统</Display>
				<OKResult>
				me:TriggerStory("XTL_STSXT");
				</OKResult>
			</li>
			<li>
				<Display>刑天血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XTXT");
				</OKResult>
			</li>
			<li>
				<Display>烈焰精灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_LYJLXT");
				</OKResult>
			</li>
			<li>
				<Display>九黎血统</Display>
				<OKResult>
				me:TriggerStory("XTL_JLXT");
				</OKResult>
			</li>
			<li>
				<Display>破晓血统</Display>
				<OKResult>
				me:TriggerStory("XTL_PXXT");
				</OKResult>
			</li>
			<li>
				<Display>银霆血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YTXT");
				</OKResult>
			</li>
			<li>
				<Display>夜渊血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YYXT");
				</OKResult>
			</li>
			<li>
				<Display>磐石血统</Display>
				<OKResult>
				me:TriggerStory("XTL_PSXT");
				</OKResult>
			</li>
			<li>
				<Display>巴德尔血统</Display>
				<OKResult>
				me:TriggerStory("XTL_BDEXT");
				</OKResult>
			</li>
			<li>
				<Display>星灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XLXT");
				</OKResult>
			</li>
			<li>
				<Display>喋血系统</Display>
				<OKResult>
				me:TriggerStory("XTL_DXXT");
				</OKResult>
			</li>
			<li>
				<Display>言灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YLXT");
				</OKResult>
			</li>
			<li>
				<Display>日冕血统</Display>
				<OKResult>
				me:TriggerStory("XTL_RMXT");
				</OKResult>
			</li>
			<li>
				<Display>月冠血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YGXT");
				</OKResult>
			</li>
			<li>
				<Display>屠魔血统</Display>
				<OKResult>
				me:TriggerStory("XTL_TMXT");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，让其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="WX_XTL2" Parent="BaseFillingStory">
		<DisplayName>万族战场（二阶）</DisplayName>
		<Desc>[img]Spr/Building/ZSKJ/WJZC.png[/img]</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>丘岭矮人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_QLAR2");
				</OKResult>
			</li>
			<li>
				<Display>狂血兽人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_KXSR2");
				</OKResult>
			</li>
			<li>
				<Display>吸血鬼血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XXGXT2");
				</OKResult>
			</li>
			<li>
				<Display>冰原巨人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_BSJRXT2");
				</OKResult>
			</li>
			<li>
				<Display>堕天使血统</Display>
				<OKResult>
				me:TriggerStory("XTL_DTSXT2");
				</OKResult>
			</li>
			<li>
				<Display>圣天使血统</Display>
				<OKResult>
				me:TriggerStory("XTL_STSXT2");
				</OKResult>
			</li>
			<li>
				<Display>刑天血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XTXT2");
				</OKResult>
			</li>
			<li>
				<Display>烈焰精灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_LYJLXT2");
				</OKResult>
			</li>
			<li>
				<Display>九黎血统</Display>
				<OKResult>
				me:TriggerStory("XTL_JLXT2");
				</OKResult>
			</li>
			<li>
				<Display>破晓血统</Display>
				<OKResult>
				me:TriggerStory("XTL_PXXT2");
				</OKResult>
			</li>
			<li>
				<Display>银霆血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YTXT2");
				</OKResult>
			</li>
			<li>
				<Display>夜渊血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YYXT2");
				</OKResult>
			</li>
			<li>
				<Display>磐石血统</Display>
				<OKResult>
				me:TriggerStory("XTL_PSXT2");
				</OKResult>
			</li>
			<li>
				<Display>巴德尔血统</Display>
				<OKResult>
				me:TriggerStory("XTL_BDEXT2");
				</OKResult>
			</li>
			<li>
				<Display>星灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XLXT2");
				</OKResult>
			</li>
			
			<li>
				<Display>言灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YLXT2");
				</OKResult>
			</li>
			<li>
				<Display>日冕血统</Display>
				<OKResult>
				me:TriggerStory("XTL_RMXT2");
				</OKResult>
			</li>
			<li>
				<Display>月冠血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YGXT2");
				</OKResult>
			</li>
			<li>
				<Display>屠魔血统</Display>
				<OKResult>
				me:TriggerStory("XTL_TMXT2");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，让其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ2");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="WX_XTL3" Parent="BaseFillingStory">
		<DisplayName>万族战场（三阶）</DisplayName>
		<Desc>[img]Spr/Building/ZSKJ/WJZC.png[/img]</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>丘岭矮人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_QLAR3");
				</OKResult>
			</li>
			<li>
				<Display>狂血兽人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_KXSR3");
				</OKResult>
			</li>
			<li>
				<Display>吸血鬼血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XXGXT3");
				</OKResult>
			</li>
			<li>
				<Display>冰原巨人血统</Display>
				<OKResult>
				me:TriggerStory("XTL_BSJRXT3");
				</OKResult>
			</li>
			<li>
				<Display>堕天使血统</Display>
				<OKResult>
				me:TriggerStory("XTL_DTSXT3");
				</OKResult>
			</li>
			<li>
				<Display>圣天使血统</Display>
				<OKResult>
				me:TriggerStory("XTL_STSXT3");
				</OKResult>
			</li>
			<li>
				<Display>刑天血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XTXT3");
				</OKResult>
			</li>
			<li>
				<Display>烈焰精灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_LYJLXT3");
				</OKResult>
			</li>
			<li>
				<Display>九黎血统</Display>
				<OKResult>
				me:TriggerStory("XTL_JLXT3");
				</OKResult>
			</li>
			<li>
				<Display>破晓血统</Display>
				<OKResult>
				me:TriggerStory("XTL_PXXT3");
				</OKResult>
			</li>
			
			<li>
				<Display>银霆血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YTXT3");
				</OKResult>
			</li>
			<li>
				<Display>夜渊血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YYXT3");
				</OKResult>
			</li>
			<li>
				<Display>磐石血统</Display>
				<OKResult>
				me:TriggerStory("XTL_PSXT3");
				</OKResult>
			</li>
			<li>
				<Display>巴德尔血统</Display>
				<OKResult>
				me:TriggerStory("XTL_BDEXT3");
				</OKResult>
			</li>
			<li>
				<Display>星灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_XLXT3");
				</OKResult>
			</li>
			
			<li>
				<Display>言灵血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YLXT3");
				</OKResult>
			</li>
			<li>
				<Display>日冕血统</Display>
				<OKResult>
				me:TriggerStory("XTL_RMXT3");
				</OKResult>
			</li>
			<li>
				<Display>月冠血统</Display>
				<OKResult>
				me:TriggerStory("XTL_YGXT3");
				</OKResult>
			</li>
			<li>
				<Display>屠魔血统</Display>
				<OKResult>
				me:TriggerStory("XTL_TMXT3");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，让其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ3");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_QLAR" Parent="BaseFillingStory">
		<DisplayName>丘岭矮人血统</DisplayName>
		<Desc>稀薄：丹气加5，炼器技能上限加10，阵法负荷加20，气海技能上限减5</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1200积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1200 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_QLAR");
									me:AddModifier("XT_QLAR")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_QLAR");
								me:AddModifier("XT_QLAR")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_QLAR") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_QLAR")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_QLAR2" Parent="BaseFillingStory">
		<DisplayName>丘岭矮人血统</DisplayName>
		<Desc>高等：丹器加9，炼器技能上限加30，阵法负荷加20，气海技能上限减5</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（2500积分兑换D线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2500 and JQD >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_QLAR")
									npc:RemoveModifier("XT_QLAR")
									npcmgr:AddFeature("XT_QLAR1");
									me:AddModifier("XT_QLAR1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_QLAR")
								npc:RemoveModifier("XT_QLAR")
								npcmgr:AddFeature("XT_QLAR1");
								me:AddModifier("XT_QLAR1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2500)
								world:SetWorldFlag(4444,JQD-1);
							me:AddMsg(XT("[NAME]消耗积分2500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1200积分兑换D线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1200 and JQD >= 1 then
							if npcmgr:HasModifier("XT_QLAR") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_QLAR")
							npc:RemoveModifier("XT_QLAR")
							npcmgr:AddFeature("XT_QLAR1");
							me:AddModifier("XT_QLAR1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							world:SetWorldFlag(4444,JQD-1);
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_QLAR1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_QLAR1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_QLAR3" Parent="BaseFillingStory">
		<DisplayName>丘岭矮人血统</DisplayName>
		<Desc>纯血：丹器加14，炼器技能上限加20，阵法负荷加50，气海技能上限减8，解锁神通：矮人三兄弟</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（4500积分兑换B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4500 and JQB >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_QLAR1")
									npc:RemoveModifier("XT_QLAR1")
									npcmgr:AddFeature("XT_QLAR2");
									me:AddModifier("XT_QLAR2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_QLAR1")
								npc:RemoveModifier("XT_QLAR1")
								npcmgr:AddFeature("XT_QLAR2");
								me:AddModifier("XT_QLAR2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4500)
								world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分4500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（3000积分兑换2C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQC >= 2 then
							if npcmgr:HasModifier("XT_QLAR1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_QLAR2");
							npcmgr:RemoveFeature("XT_QLAR1")
							npc:RemoveModifier("XT_QLAR1")
							me:AddModifier("XT_QLAR2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
							world:SetWorldFlag(4444,JQD-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_QLAR2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_QLAR2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_KXSR" Parent="BaseFillingStory">
		<DisplayName>狂血兽人血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1500积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1500 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_KXSR");
									me:AddModifier("XT_KXSR")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_KXSR");
								me:AddModifier("XT_KXSR")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1500)
							me:AddMsg(XT("[NAME]消耗积分1500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_KXSR") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_KXSR")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_KXSR2" Parent="BaseFillingStory">
		<DisplayName>狂血兽人血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（3000积分兑换D线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQD >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_KXSR")
									npc:RemoveModifier("XT_KXSR")
									npcmgr:AddFeature("XT_KXSR1");
									me:AddModifier("XT_KXSR1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_KXSR")
								npc:RemoveModifier("XT_KXSR")
								npcmgr:AddFeature("XT_KXSR1");
								me:AddModifier("XT_KXSR1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4444,JQD-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1500积分兑换D线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1500 and JQD >= 1 then
							if npcmgr:HasModifier("XT_KXSR") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_KXSR")
							npc:RemoveModifier("XT_KXSR")
							npcmgr:AddFeature("XT_KXSR1");
							me:AddModifier("XT_KXSR1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1500)
							world:SetWorldFlag(4444,JQD-1);
							me:AddMsg(XT("[NAME]消耗积分1500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_KXSR1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_KXSR1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_KXSR3" Parent="BaseFillingStory">
		<DisplayName>狂血兽人血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（4000积分兑换A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQA >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_KXSR1")
									npc:RemoveModifier("XT_KXSR1")
									npcmgr:AddFeature("XT_KXSR2");
									me:AddModifier("XT_KXSR2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_KXSR1")
								npc:RemoveModifier("XT_KXSR1")
								npcmgr:AddFeature("XT_KXSR2");
								me:AddModifier("XT_KXSR2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
								world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（3000积分兑换2B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQB >= 2 then
							if npcmgr:HasModifier("XT_KXSR1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_KXSR2");
							npcmgr:RemoveFeature("XT_KXSR1")
							npc:RemoveModifier("XT_KXSR1")
							me:AddModifier("XT_KXSR2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_KXSR2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_KXSR2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	

	<Story Name="XTL_XXGXT" Parent="BaseFillingStory">
		<DisplayName>吸血鬼血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1400积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1400 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_XXGXT");
									me:AddModifier("XT_XXGXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_XXGXT");
								me:AddModifier("XT_XXGXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1400)
							me:AddMsg(XT("[NAME]消耗积分1400，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XXGXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_XXGXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_XXGXT2" Parent="BaseFillingStory">
		<DisplayName>吸血鬼血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（3000积分兑换2B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQB >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_XXGXT")
									npc:RemoveModifier("XT_XXGXT")
									npcmgr:AddFeature("XT_XXGXT1");
									me:AddModifier("XT_XXGXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_XXGXT")
								npc:RemoveModifier("XT_XXGXT")
								npcmgr:AddFeature("XT_XXGXT1");
								me:AddModifier("XT_XXGXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（2000积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQB >= 1 then
							if npcmgr:HasModifier("XT_XXGXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_XXGXT")
							npc:RemoveModifier("XT_XXGXT")
							npcmgr:AddFeature("XT_XXGXT1");
							me:AddModifier("XT_XXGXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XXGXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_XXGXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_XXGXT3" Parent="BaseFillingStory">
		<DisplayName>吸血鬼血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（4000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_XXGXT1")
									npc:RemoveModifier("XT_XXGXT1")
									npcmgr:AddFeature("XT_XXGXT2");
									me:AddModifier("XT_XXGXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_XXGXT1")
								npc:RemoveModifier("XT_XXGXT1")
								npcmgr:AddFeature("XT_XXGXT2");
								me:AddModifier("XT_XXGXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（3000积分兑换2A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQA >= 2 then
							if npcmgr:HasModifier("XT_XXGXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_XXGXT2");
							npcmgr:RemoveFeature("XT_XXGXT1")
							npc:RemoveModifier("XT_XXGXT1")
							me:AddModifier("XT_XXGXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_XXGXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_XXGXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	

	<Story Name="XTL_BSJRXT" Parent="BaseFillingStory">
		<DisplayName>冰元巨人血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1100积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1100 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_BSJRXT");
									me:AddModifier("XT_BSJRXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_BSJRXT");
								me:AddModifier("XT_BSJRXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1100)
							me:AddMsg(XT("[NAME]消耗积分1100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_BSJRXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_BSJRXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_BSJRXT2" Parent="BaseFillingStory">
		<DisplayName>冰元巨人血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（2000积分兑换D线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQD >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_BSJRXT")
									npc:RemoveModifier("XT_BSJRXT")
									npcmgr:AddFeature("XT_BSJRXT1");
									me:AddModifier("XT_BSJRXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_BSJRXT")
								npc:RemoveModifier("XT_BSJRXT")
								npcmgr:AddFeature("XT_BSJRXT1");
								me:AddModifier("XT_BSJRXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
								world:SetWorldFlag(4444,JQD-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1000积分兑换2D线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1000 and JQD >= 2 then
							if npcmgr:HasModifier("XT_BSJRXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_BSJRXT")
							npc:RemoveModifier("XT_BSJRXT")
							npcmgr:AddFeature("XT_BSJRXT1");
							me:AddModifier("XT_BSJRXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
							world:SetWorldFlag(4444,JQD-2);
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_BSJRXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_BSJRXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_BSJRXT3" Parent="BaseFillingStory">
		<DisplayName>冰元巨人血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（3000积分兑换4B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQB >= 4 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_BSJRXT1")
									npc:RemoveModifier("XT_BSJRXT1")
									npcmgr:AddFeature("XT_BSJRXT2");
									me:AddModifier("XT_BSJRXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_BSJRXT1")
								npc:RemoveModifier("XT_BSJRXT1")
								npcmgr:AddFeature("XT_BSJRXT2");
								me:AddModifier("XT_BSJRXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4446,JQB-4);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（3000积分兑换2B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQB >= 2 then
							if npcmgr:HasModifier("XT_BSJRXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_BSJRXT2");
							npcmgr:RemoveFeature("XT_BSJRXT1")
							npc:RemoveModifier("XT_BSJRXT1")
							me:AddModifier("XT_BSJRXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_BSJRXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_BSJRXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
	<Story Name="XTL_DTSXT" Parent="BaseFillingStory">
		<DisplayName>堕天使血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（2000积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 2000 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_DTSXT");
									me:AddModifier("XT_DTSXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_DTSXT");
								me:AddModifier("XT_DTSXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_DTSXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_DTSXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_DTSXT2" Parent="BaseFillingStory">
		<DisplayName>堕天使血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（4000积分兑换B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQB >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_DTSXT")
									npc:RemoveModifier("XT_DTSXT")
									npcmgr:AddFeature("XT_DTSXT1");
									me:AddModifier("XT_DTSXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_DTSXT")
								npc:RemoveModifier("XT_DTSXT")
								npcmgr:AddFeature("XT_DTSXT1");
								me:AddModifier("XT_DTSXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
								world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（3000积分兑换2C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQC >= 2 then
							if npcmgr:HasModifier("XT_DTSXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_DTSXT")
							npc:RemoveModifier("XT_DTSXT")
							npcmgr:AddFeature("XT_DTSXT1");
							me:AddModifier("XT_DTSXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
							world:SetWorldFlag(4445,JQC-2);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_DTSXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_DTSXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_DTSXT3" Parent="BaseFillingStory">
		<DisplayName>堕天使血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（6000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 6000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_DTSXT1")
									npc:RemoveModifier("XT_DTSXT1")
									npcmgr:AddFeature("XT_DTSXT2");
									me:AddModifier("XT_DTSXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_DTSXT1")
								npc:RemoveModifier("XT_DTSXT1")
								npcmgr:AddFeature("XT_DTSXT2");
								me:AddModifier("XT_DTSXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",6000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分6000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（4000积分兑换2A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQA >= 2 then
							if npcmgr:HasModifier("XT_DTSXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_DTSXT2");
							npcmgr:RemoveFeature("XT_DTSXT1")
							npc:RemoveModifier("XT_DTSXT1")
							me:AddModifier("XT_DTSXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_DTSXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_DTSXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
	<Story Name="XTL_STSXT" Parent="BaseFillingStory">
		<DisplayName>圣天使血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（2000积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 2000 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_STSXT");
									me:AddModifier("XT_STSXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_STSXT");
								me:AddModifier("XT_STSXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_STSXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_STSXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_STSXT2" Parent="BaseFillingStory">
		<DisplayName>圣天使血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（4000积分兑换B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQB >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_STSXT")
									npc:RemoveModifier("XT_STSXT")
									npcmgr:AddFeature("XT_STSXT1");
									me:AddModifier("XT_STSXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_STSXT")
								npc:RemoveModifier("XT_STSXT")
								npcmgr:AddFeature("XT_STSXT1");
								me:AddModifier("XT_STSXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
								world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（3000积分兑换2C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQC >= 2 then
							if npcmgr:HasModifier("XT_STSXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_STSXT")
							npc:RemoveModifier("XT_STSXT")
							npcmgr:AddFeature("XT_STSXT1");
							me:AddModifier("XT_STSXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
							world:SetWorldFlag(4445,JQC-2);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_STSXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_STSXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ2");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_STSXT3" Parent="BaseFillingStory">
		<DisplayName>圣天使血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（6000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 6000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_STSXT1")
									npc:RemoveModifier("XT_STSXT1")
									npcmgr:AddFeature("XT_STSXT2");
									me:AddModifier("XT_STSXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_STSXT1")
								npc:RemoveModifier("XT_STSXT1")
								npcmgr:AddFeature("XT_STSXT2");
								me:AddModifier("XT_STSXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",6000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分6000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（4000积分兑换2A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQA >= 2 then
							if npcmgr:HasModifier("XT_STSXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_STSXT2");
							npcmgr:RemoveFeature("XT_STSXT1")
							npc:RemoveModifier("XT_STSXT1")
							me:AddModifier("XT_STSXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_STSXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_STSXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧"))
				me:TriggerStory("WX_ZSKJ3");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_XTXT" Parent="BaseFillingStory">
		<DisplayName>刑天血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（500积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_XTXT");
									me:AddModifier("XT_XTXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_XTXT");
								me:AddModifier("XT_XTXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XTXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_XTXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_XTXT2" Parent="BaseFillingStory">
		<DisplayName>刑天血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（2000积分兑换B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQB >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_XTXT")
									npc:RemoveModifier("XT_XTXT")
									npcmgr:AddFeature("XT_XTXT1");
									me:AddModifier("XT_XTXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_XTXT")
								npc:RemoveModifier("XT_XTXT")
								npcmgr:AddFeature("XT_XTXT1");
								me:AddModifier("XT_XTXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
								world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1000积分兑换A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1000 and JQA >= 1 then
							if npcmgr:HasModifier("XT_XTXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_XTXT")
							npc:RemoveModifier("XT_XTXT")
							npcmgr:AddFeature("XT_XTXT1");
							me:AddModifier("XT_XTXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XTXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_XTXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_XTXT3" Parent="BaseFillingStory">
		<DisplayName>刑天血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（3000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_XTXT1")
									npc:RemoveModifier("XT_XTXT1")
									npcmgr:AddFeature("XT_XTXT2");
									me:AddModifier("XT_XTXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_XTXT1")
								npc:RemoveModifier("XT_XTXT1")
								npcmgr:AddFeature("XT_XTXT2");
								me:AddModifier("XT_XTXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换2A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQA >= 2 then
							if npcmgr:HasModifier("XT_XTXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_XTXT2");
							npcmgr:RemoveFeature("XT_XTXT1")
							npc:RemoveModifier("XT_XTXT1")
							me:AddModifier("XT_XTXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_XTXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_XTXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_LYJLXT" Parent="BaseFillingStory">
		<DisplayName>烈焰精灵血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（800积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 800 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_LYJLXT");
									me:AddModifier("XT_LYJLXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_LYJLXT");
								me:AddModifier("XT_LYJLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",800)
							me:AddMsg(XT("[NAME]消耗积分800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_LYJLXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_LYJLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_LYJLXT2" Parent="BaseFillingStory">
		<DisplayName>烈焰精灵血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1000积分兑换C线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1000 and JQC >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_LYJLXT")
									npc:RemoveModifier("XT_LYJLXT")
									npcmgr:AddFeature("XT_LYJLXT1");
									me:AddModifier("XT_LYJLXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_LYJLXT")
								npc:RemoveModifier("XT_LYJLXT")
								npcmgr:AddFeature("XT_LYJLXT1");
								me:AddModifier("XT_LYJLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
								world:SetWorldFlag(4445,JQC-1);
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1000积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1000 and JQB >= 1 then
							if npcmgr:HasModifier("XT_LYJLXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_LYJLXT")
							npc:RemoveModifier("XT_LYJLXT")
							npcmgr:AddFeature("XT_LYJLXT1");
							me:AddModifier("XT_LYJLXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_LYJLXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_LYJLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_LYJLXT3" Parent="BaseFillingStory">
		<DisplayName>烈焰精灵血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（3000积分兑换A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQA >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_LYJLXT1")
									npc:RemoveModifier("XT_LYJLXT1")
									npcmgr:AddFeature("XT_LYJLXT2");
									me:AddModifier("XT_LYJLXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_LYJLXT1")
								npc:RemoveModifier("XT_LYJLXT1")
								npcmgr:AddFeature("XT_LYJLXT2");
								me:AddModifier("XT_LYJLXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQA >= 1 then
							if npcmgr:HasModifier("XT_LYJLXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_LYJLXT2");
							npcmgr:RemoveFeature("XT_LYJLXT1")
							npc:RemoveModifier("XT_LYJLXT1")
							me:AddModifier("XT_LYJLXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_LYJLXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_LYJLXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_JLXT" Parent="BaseFillingStory">
		<DisplayName>九黎血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1200积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1200 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_JLXT");
									me:AddModifier("XT_JLXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_JLXT");
								me:AddModifier("XT_JLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_JLXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_JLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_JLXT2" Parent="BaseFillingStory">
		<DisplayName>九黎血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1500积分兑换C线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1500 and JQC >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_JLXT")
									npc:RemoveModifier("XT_JLXT")
									npcmgr:AddFeature("XT_JLXT1");
									me:AddModifier("XT_JLXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_JLXT")
								npc:RemoveModifier("XT_JLXT")
								npcmgr:AddFeature("XT_JLXT1");
								me:AddModifier("XT_JLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1500)
								world:SetWorldFlag(4445,JQC-1);
							me:AddMsg(XT("[NAME]消耗积分1500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1800积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1800 and JQD >= 1 then
							if npcmgr:HasModifier("XT_JLXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_JLXT")
							npc:RemoveModifier("XT_JLXT")
							npcmgr:AddFeature("XT_JLXT1");
							me:AddModifier("XT_JLXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1800)
							world:SetWorldFlag(4444,JQD-1);
							me:AddMsg(XT("[NAME]消耗积分1800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_JLXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_JLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_JLXT3" Parent="BaseFillingStory">
		<DisplayName>九黎血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（3000积分兑换A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQA >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_JLXT1")
									npc:RemoveModifier("XT_JLXT1")
									npcmgr:AddFeature("XT_JLXT2");
									me:AddModifier("XT_JLXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_JLXT1")
								npc:RemoveModifier("XT_JLXT1")
								npcmgr:AddFeature("XT_JLXT2");
								me:AddModifier("XT_JLXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQB >= 1 then
							if npcmgr:HasModifier("XT_JLXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_JLXT2");
							npcmgr:RemoveFeature("XT_JLXT1")
							npc:RemoveModifier("XT_JLXT1")
							me:AddModifier("XT_JLXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_JLXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_JLXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_PXXT" Parent="BaseFillingStory">
		<DisplayName>破晓血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1200积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1200 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_PXXT");
									me:AddModifier("XT_PXXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_PXXT");
								me:AddModifier("XT_PXXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_PXXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_PXXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_PXXT2" Parent="BaseFillingStory">
		<DisplayName>破晓血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1800积分兑换3C线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1800 and JQC >= 3 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_PXXT")
									npc:RemoveModifier("XT_PXXT")
									npcmgr:AddFeature("XT_PXXT1");
									me:AddModifier("XT_PXXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_PXXT")
								npc:RemoveModifier("XT_PXXT")
								npcmgr:AddFeature("XT_PXXT1");
								me:AddModifier("XT_PXXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1800)
								world:SetWorldFlag(4445,JQC-3);
							me:AddMsg(XT("[NAME]消耗积分1800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1200积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1200 and JQB >= 1 then
							if npcmgr:HasModifier("XT_PXXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_PXXT")
							npc:RemoveModifier("XT_PXXT")
							npcmgr:AddFeature("XT_PXXT1");
							me:AddModifier("XT_PXXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_PXXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_PXXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_PXXT3" Parent="BaseFillingStory">
		<DisplayName>破晓血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（3000积分兑换A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQA >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_PXXT1")
									npc:RemoveModifier("XT_PXXT1")
									npcmgr:AddFeature("XT_PXXT2");
									me:AddModifier("XT_PXXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_PXXT1")
								npc:RemoveModifier("XT_PXXT1")
								npcmgr:AddFeature("XT_PXXT2");
								me:AddModifier("XT_PXXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQB >= 1 then
							if npcmgr:HasModifier("XT_PXXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_PXXT2");
							npcmgr:RemoveFeature("XT_PXXT1")
							npc:RemoveModifier("XT_PXXT1")
							me:AddModifier("XT_PXXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_PXXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_PXXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_YTXT" Parent="BaseFillingStory">
		<DisplayName>银霆血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（2200积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 2200 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_YTXT");
									me:AddModifier("XT_YTXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_YTXT");
								me:AddModifier("XT_YTXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2200)
							me:AddMsg(XT("[NAME]消耗积分2200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_YTXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_YTXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YTXT2" Parent="BaseFillingStory">
		<DisplayName>银霆血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1800积分兑换2B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1800 and JQB >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YTXT")
									npc:RemoveModifier("XT_YTXT")
									npcmgr:AddFeature("XT_YTXT1");
									me:AddModifier("XT_YTXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_YTXT")
								npc:RemoveModifier("XT_YTXT")
								npcmgr:AddFeature("XT_YTXT1");
								me:AddModifier("XT_YTXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1800)
								world:SetWorldFlag(4446,JQB-2);
							me:AddMsg(XT("[NAME]消耗积分1800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1200积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1200 and JQB >= 1 then
							if npcmgr:HasModifier("XT_YTXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_YTXT")
							npc:RemoveModifier("XT_YTXT")
							npcmgr:AddFeature("XT_YTXT1");
							me:AddModifier("XT_YTXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_YTXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YTXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YTXT3" Parent="BaseFillingStory">
		<DisplayName>银霆血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（5000积分兑换2A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 5000 and JQA >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YTXT1")
									npc:RemoveModifier("XT_YTXT1")
									npcmgr:AddFeature("XT_YTXT2");
									me:AddModifier("XT_YTXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_YTXT1")
								npc:RemoveModifier("XT_YTXT1")
								npcmgr:AddFeature("XT_YTXT2");
								me:AddModifier("XT_YTXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",5000)
								world:SetWorldFlag(4447,JQA-2);
							me:AddMsg(XT("[NAME]消耗积分5000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQA >= 1 then
							if npcmgr:HasModifier("XT_YTXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_YTXT2");
							npcmgr:RemoveFeature("XT_YTXT1")
							npc:RemoveModifier("XT_YTXT1")
							me:AddModifier("XT_YTXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_YTXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YTXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_YYXT" Parent="BaseFillingStory">
		<DisplayName>夜渊血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（2200积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 2200 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_YYXT");
									me:AddModifier("XT_YYXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_YYXT");
								me:AddModifier("XT_YYXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2200)
							me:AddMsg(XT("[NAME]消耗积分2200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_YYXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_YYXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YYXT2" Parent="BaseFillingStory">
		<DisplayName>夜渊血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1800积分兑换2B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1800 and JQB >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YYXT")
									npc:RemoveModifier("XT_YYXT")
									npcmgr:AddFeature("XT_YYXT1");
									me:AddModifier("XT_YYXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_YYXT")
								npc:RemoveModifier("XT_YYXT")
								npcmgr:AddFeature("XT_YYXT1");
								me:AddModifier("XT_YYXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1800)
								world:SetWorldFlag(4446,JQB-2);
							me:AddMsg(XT("[NAME]消耗积分1800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1200积分兑换B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1200 and JQB >= 1 then
							if npcmgr:HasModifier("XT_YYXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_YYXT")
							npc:RemoveModifier("XT_YYXT")
							npcmgr:AddFeature("XT_YYXT1");
							me:AddModifier("XT_YYXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_YYXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YYXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YYXT3" Parent="BaseFillingStory">
		<DisplayName>夜渊血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（5000积分兑换2A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 5000 and JQA >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YYXT1")
									npc:RemoveModifier("XT_YYXT1")
									npcmgr:AddFeature("XT_YYXT2");
									me:AddModifier("XT_YYXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_YYXT1")
								npc:RemoveModifier("XT_YYXT1")
								npcmgr:AddFeature("XT_YYXT2");
								me:AddModifier("XT_YYXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",5000)
								world:SetWorldFlag(4447,JQA-2);
							me:AddMsg(XT("[NAME]消耗积分5000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQA >= 1 then
							if npcmgr:HasModifier("XT_YYXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_YYXT2");
							npcmgr:RemoveFeature("XT_YYXT1")
							npc:RemoveModifier("XT_YYXT1")
							me:AddModifier("XT_YYXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_YYXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YYXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
	<Story Name="XTL_PSXT" Parent="BaseFillingStory">
		<DisplayName>磐石血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1200积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1200 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_PSXT");
									me:AddModifier("XT_PSXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_PSXT");
								me:AddModifier("XT_PSXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_PSXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_PSXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_PSXT2" Parent="BaseFillingStory">
		<DisplayName>磐石血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1800积分兑换B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1800 and JQB >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_PSXT")
									npc:RemoveModifier("XT_PSXT")
									npcmgr:AddFeature("XT_PSXT1");
									me:AddModifier("XT_PSXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_PSXT")
								npc:RemoveModifier("XT_PSXT")
								npcmgr:AddFeature("XT_PSXT1");
								me:AddModifier("XT_PSXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1800)
								world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分1800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1200积分兑换C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1200 and JQC >= 1 then
							if npcmgr:HasModifier("XT_PSXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_PSXT")
							npc:RemoveModifier("XT_PSXT")
							npcmgr:AddFeature("XT_PSXT1");
							me:AddModifier("XT_PSXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1200)
							world:SetWorldFlag(4445,JQC-1);
							me:AddMsg(XT("[NAME]消耗积分1200，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_PSXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_PSXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_PSXT3" Parent="BaseFillingStory">
		<DisplayName>磐石血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（5000积分兑换A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 5000 and JQA >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_PSXT1")
									npc:RemoveModifier("XT_PSXT1")
									npcmgr:AddFeature("XT_PSXT2");
									me:AddModifier("XT_PSXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_PSXT1")
								npc:RemoveModifier("XT_PSXT1")
								npcmgr:AddFeature("XT_PSXT2");
								me:AddModifier("XT_PSXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",5000)
								world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分5000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换2B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQB >= 2 then
							if npcmgr:HasModifier("XT_PSXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_PSXT2");
							npcmgr:RemoveFeature("XT_PSXT1")
							npc:RemoveModifier("XT_PSXT1")
							me:AddModifier("XT_PSXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4446,JQB-2);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_PSXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_PSXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_BDEXT" Parent="BaseFillingStory">
		<DisplayName>巴德尔血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（800积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 800 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_BDEXT");
									me:AddModifier("XT_BDEXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_BDEXT");
								me:AddModifier("XT_BDEXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",800)
							me:AddMsg(XT("[NAME]消耗积分800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_BDEXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_BDEXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_BDEXT2" Parent="BaseFillingStory">
		<DisplayName>巴德尔血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（2800积分兑换B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2800 and JQB >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_BDEXT")
									npc:RemoveModifier("XT_BDEXT")
									npcmgr:AddFeature("XT_BDEXT1");
									me:AddModifier("XT_BDEXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_BDEXT")
								npc:RemoveModifier("XT_BDEXT")
								npcmgr:AddFeature("XT_BDEXT1");
								me:AddModifier("XT_BDEXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2800)
								world:SetWorldFlag(4446,JQB-1);
							me:AddMsg(XT("[NAME]消耗积分2800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1800积分兑换C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1800 and JQC >= 1 then
							if npcmgr:HasModifier("XT_BDEXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_BDEXT")
							npc:RemoveModifier("XT_BDEXT")
							npcmgr:AddFeature("XT_BDEXT1");
							me:AddModifier("XT_BDEXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1800)
							world:SetWorldFlag(4445,JQC-1);
							me:AddMsg(XT("[NAME]消耗积分1800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_BDEXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_BDEXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_BDEXT3" Parent="BaseFillingStory">
		<DisplayName>巴德尔血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（3000积分兑换A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQA >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_BDEXT1")
									npc:RemoveModifier("XT_BDEXT1")
									npcmgr:AddFeature("XT_BDEXT2");
									me:AddModifier("XT_BDEXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_BDEXT1")
								npc:RemoveModifier("XT_BDEXT1")
								npcmgr:AddFeature("XT_BDEXT2");
								me:AddModifier("XT_BDEXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（2000积分兑换2A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2000 and JQA >= 2 then
							if npcmgr:HasModifier("XT_BDEXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_BDEXT2");
							npcmgr:RemoveFeature("XT_BDEXT1")
							npc:RemoveModifier("XT_BDEXT1")
							me:AddModifier("XT_BDEXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							world:SetWorldFlag(4447,JQA-2);
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_BDEXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_BDEXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
	<Story Name="XTL_XLXT" Parent="BaseFillingStory">
		<DisplayName>星灵血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（2000积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 2000 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_XLXT");
									me:AddModifier("XT_XLXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_XLXT");
								me:AddModifier("XT_XLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XLXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_XLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_XLXT2" Parent="BaseFillingStory">
		<DisplayName>星灵血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（3000积分兑换2B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQB >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_XLXT")
									npc:RemoveModifier("XT_XLXT")
									npcmgr:AddFeature("XT_XLXT1");
									me:AddModifier("XT_XLXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_XLXT")
								npc:RemoveModifier("XT_XLXT")
								npcmgr:AddFeature("XT_XLXT1");
								me:AddModifier("XT_XLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4446,JQB-2);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（2800积分兑换C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2800 and JQC >= 1 then
							if npcmgr:HasModifier("XT_XLXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_XLXT")
							npc:RemoveModifier("XT_XLXT")
							npcmgr:AddFeature("XT_XLXT1");
							me:AddModifier("XT_XLXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2800)
							world:SetWorldFlag(4445,JQC-1);
							me:AddMsg(XT("[NAME]消耗积分2800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XLXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_XLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_XLXT3" Parent="BaseFillingStory">
		<DisplayName>星灵血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（6000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 6000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_XLXT1")
									npc:RemoveModifier("XT_XLXT1")
									npcmgr:AddFeature("XT_XLXT2");
									me:AddModifier("XT_XLXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_XLXT1")
								npc:RemoveModifier("XT_XLXT1")
								npcmgr:AddFeature("XT_XLXT2");
								me:AddModifier("XT_XLXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",6000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分6000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（4000积分兑换4A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQA >= 4 then
							if npcmgr:HasModifier("XT_XLXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_XLXT2");
							npcmgr:RemoveFeature("XT_XLXT1")
							npc:RemoveModifier("XT_XLXT1")
							me:AddModifier("XT_XLXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
							world:SetWorldFlag(4447,JQA-4);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_XLXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_XLXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
		<Story Name="XTL_DXXT" Parent="BaseFillingStory">
		<DisplayName>喋血系统</DisplayName>
		<Desc>稀薄：增加秘体全局攻击3000防御3000，护盾值增强2，移动速度减15，食量增加10</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1000积分兑换）</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1800 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_DXXT");
									me:AddModifier("XT_DXXT")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:AddFeature("XT_DXXT");
								me:AddModifier("XT_DXXT")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_DXXT") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_DXXT")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_YLXT" Parent="BaseFillingStory">
		<DisplayName>言灵血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（2000积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 2000 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_YLXT");
									me:AddModifier("XT_YLXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_YLXT");
								me:AddModifier("XT_YLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2000)
							me:AddMsg(XT("[NAME]消耗积分2000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XLXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_YLXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YLXT2" Parent="BaseFillingStory">
		<DisplayName>言灵血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（3000积分兑换2B线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 3000 and JQB >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YLXT")
									npc:RemoveModifier("XT_YLXT")
									npcmgr:AddFeature("XT_YLXT1");
									me:AddModifier("XT_YLXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_YLXT")
								npc:RemoveModifier("XT_YLXT")
								npcmgr:AddFeature("XT_YLXT1");
								me:AddModifier("XT_YLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",3000)
								world:SetWorldFlag(4446,JQB-2);
							me:AddMsg(XT("[NAME]消耗积分3000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（2800积分兑换C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 2800 and JQC >= 1 then
							if npcmgr:HasModifier("XT_YLXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_YLXT")
							npc:RemoveModifier("XT_YLXT")
							npcmgr:AddFeature("XT_YLXT1");
							me:AddModifier("XT_YLXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",2800)
							world:SetWorldFlag(4445,JQC-1);
							me:AddMsg(XT("[NAME]消耗积分2800，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_YLXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YLXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YLXT3" Parent="BaseFillingStory">
		<DisplayName>言灵血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（6000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 6000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YLXT1")
									npc:RemoveModifier("XT_YLXT1")
									npcmgr:AddFeature("XT_YLXT2");
									me:AddModifier("XT_YLXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_YLXT1")
								npc:RemoveModifier("XT_YLXT1")
								npcmgr:AddFeature("XT_YLXT2");
								me:AddModifier("XT_YLXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",6000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分6000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（4000积分兑换4A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQA >= 4 then
							if npcmgr:HasModifier("XT_YLXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_YLXT2");
							npcmgr:RemoveFeature("XT_YLXT1")
							npc:RemoveModifier("XT_YLXT1")
							me:AddModifier("XT_YLXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
							world:SetWorldFlag(4447,JQA-4);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_YLXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YLXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	<Story Name="XTL_RMXT" Parent="BaseFillingStory">
		<DisplayName>日冕血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（900积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 900 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_RMXT");
									me:AddModifier("XT_RMXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_RMXT");
								me:AddModifier("XT_RMXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",900)
							me:AddMsg(XT("[NAME]消耗积分900，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XLXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_RMXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_RMXT2" Parent="BaseFillingStory">
		<DisplayName>日冕血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1500积分兑换2C线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1500 and JQC >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_RMXT")
									npc:RemoveModifier("XT_RMXT")
									npcmgr:AddFeature("XT_RMXT1");
									me:AddModifier("XT_RMXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_RMXT")
								npc:RemoveModifier("XT_RMXT")
								npcmgr:AddFeature("XT_RMXT1");
								me:AddModifier("XT_RMXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1500)
								world:SetWorldFlag(4445,JQC-2);
							me:AddMsg(XT("[NAME]消耗积分1500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1000积分兑换3C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1000 and JQC >= 3 then
							if npcmgr:HasModifier("XT_RMXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_RMXT")
							npc:RemoveModifier("XT_RMXT")
							npcmgr:AddFeature("XT_RMXT1");
							me:AddModifier("XT_RMXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
							world:SetWorldFlag(4445,JQC-3);
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_RMXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_RMXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_RMXT3" Parent="BaseFillingStory">
		<DisplayName>日冕血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（4000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_RMXT1")
									npc:RemoveModifier("XT_RMXT1")
									npcmgr:AddFeature("XT_RMXT2");
									me:AddModifier("XT_RMXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_RMXT1")
								npc:RemoveModifier("XT_RMXT1")
								npcmgr:AddFeature("XT_RMXT2");
								me:AddModifier("XT_RMXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（4000积分兑换3A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQA >= 3 then
							if npcmgr:HasModifier("XT_RMXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_RMXT2");
							npcmgr:RemoveFeature("XT_RMXT1")
							npc:RemoveModifier("XT_RMXT1")
							me:AddModifier("XT_RMXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
							world:SetWorldFlag(4447,JQA-3);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_RMXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_RMXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
	<Story Name="XTL_YGXT" Parent="BaseFillingStory">
		<DisplayName>月冠血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（900积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 900 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_YGXT");
									me:AddModifier("XT_YGXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_YGXT");
								me:AddModifier("XT_YGXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",900)
							me:AddMsg(XT("[NAME]消耗积分900，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XLXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_YGXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YGXT2" Parent="BaseFillingStory">
		<DisplayName>月冠血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1500积分兑换2C线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1500 and JQC >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YGXT")
									npc:RemoveModifier("XT_YGXT")
									npcmgr:AddFeature("XT_YGXT1");
									me:AddModifier("XT_YGXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_YGXT")
								npc:RemoveModifier("XT_YGXT")
								npcmgr:AddFeature("XT_YGXT1");
								me:AddModifier("XT_YGXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1500)
								world:SetWorldFlag(4445,JQC-2);
							me:AddMsg(XT("[NAME]消耗积分1500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1000积分兑换3C线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1000 and JQC >= 3 then
							if npcmgr:HasModifier("XT_YGXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_YGXT")
							npc:RemoveModifier("XT_YGXT")
							npcmgr:AddFeature("XT_YGXT1");
							me:AddModifier("XT_YGXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
							world:SetWorldFlag(4445,JQC-3);
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_YGXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YGXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_YGXT3" Parent="BaseFillingStory">
		<DisplayName>月冠血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（4000积分兑换S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQS >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_YGXT1")
									npc:RemoveModifier("XT_YGXT1")
									npcmgr:AddFeature("XT_YGXT2");
									me:AddModifier("XT_YGXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_YGXT1")
								npc:RemoveModifier("XT_YGXT1")
								npcmgr:AddFeature("XT_YGXT2");
								me:AddModifier("XT_YGXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
								world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（4000积分兑换3A线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQA >= 3 then
							if npcmgr:HasModifier("XT_YGXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_YGXT2");
							npcmgr:RemoveFeature("XT_YGXT1")
							npc:RemoveModifier("XT_YGXT1")
							me:AddModifier("XT_YGXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
							world:SetWorldFlag(4447,JQA-3);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_YGXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_YGXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
	<Story Name="XTL_TMXT" Parent="BaseFillingStory">
		<DisplayName>屠魔血统</DisplayName>
		<Desc>稀薄</Desc>
		<Kind>None</Kind>
		<Selections>
			<li>
				<Display>融合血统（稀薄）（1600积分兑换）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 1600 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:AddFeature("XT_TMXT");
									me:AddModifier("XT_TMXT")
									npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  me:GetModifierStack("WX_XMJX") == 0 then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:AddFeature("XT_TMXT");
								me:AddModifier("XT_TMXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1600)
							me:AddMsg(XT("[NAME]消耗积分1600，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end

				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_XLXT") == true and npcmgr:HasModifier("WX_XMJX") == false then
								me:AddModifier("XT_TMXT")
								npcmgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足以强化。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_TMXT2" Parent="BaseFillingStory">
		<DisplayName>屠魔血统</DisplayName>
		<Desc>高等</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（高等）（1500积分兑换1A线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1500 and JQA >= 1 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if npcmgr:HasModifier("WX_XMJX") then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_TMXT")
									npc:RemoveModifier("XT_TMXT")
									npcmgr:AddFeature("XT_TMXT1");
									me:AddModifier("XT_TMXT1")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								npcmgr:RemoveFeature("XT_TMXT")
								npc:RemoveModifier("XT_TMXT")
								npcmgr:AddFeature("XT_TMXT1");
								me:AddModifier("XT_TMXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1500)
								world:SetWorldFlag(4447,JQA-1);
							me:AddMsg(XT("[NAME]消耗积分1500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（高等）（1000积分兑换3B线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 1000 and JQB >= 3 then
							if npcmgr:HasModifier("XT_TMXT") == true then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:RemoveFeature("XT_TMXT")
							npc:RemoveModifier("XT_TMXT")
							npcmgr:AddFeature("XT_TMXT1");
							me:AddModifier("XT_TMXT1")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",1000)
							world:SetWorldFlag(4446,JQB-3);
							me:AddMsg(XT("[NAME]消耗积分1000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（100积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 100 then
							if npc.LuaHelper:CheckFeature("XT_TMXT1") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_TMXT1")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",100)
							me:AddMsg(XT("[NAME]消耗积分100，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	<Story Name="XTL_TMXT3" Parent="BaseFillingStory">
		<DisplayName>屠魔血统</DisplayName>
		<Desc>纯血</Desc>
		<Kind>None</Kind>
		<Selections>
			
			<li>
				<Display>融合血统（纯血）（4000积分兑换2S线剧情）适用条件：不具备该体质的角色可进行融合</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQS >= 2 then
							if npc.LuaHelper:CheckFeature("XT_YMXT") == true then
								me:AddMsg(XT("[NAME]身具异脉血统，无法正常融合血统"));
							else
								if me:GetModifierStack("WX_XMJX") == 1 then
								me:AddMsg(XT("[NAME]似乎已经觉醒过血统了"));
									if npc.LuaHelper:CheckFeature("XT_SMXT") == true then
									me:AddMsg(XT("[NAME]是双脉体质者，成功融合该血统"));
									npcmgr:RemoveFeature("XT_TMXT1")
									npc:RemoveModifier("XT_TMXT1")
									npcmgr:AddFeature("XT_TMXT2");
									me:AddModifier("XT_TMXT2")
									me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
									else
									me:AddMsg(XT("[NAME]不具备双脉体质，融合血统失败。并被主神空间抹杀"));
									CS.XiaWorld.ThingMgr.Instance:RemoveThing(npc,false,true)
									end
								elseif  npcmgr:HasModifier("WX_XMJX") == false then
								me:AddMsg(XT("[NAME]成功融合该血统。"));
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								npcmgr:RemoveFeature("XT_TMXT1")
								npc:RemoveModifier("XT_TMXT1")
								npcmgr:AddFeature("XT_TMXT2");
								me:AddModifier("XT_TMXT2")
								end
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
								world:SetWorldFlag(4448,JQS-2);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>升级血统（纯血）（4000积分兑换S线剧情）将前一个血统浓度提升，需要同时拥有前一个血统浓度加成以及体质才能成功升级</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						
						if JF >= 4000 and JQS >= 1 then
							if npcmgr:HasModifier("XT_TMXT1") then
							me:AddMsg(XT("[NAME]成功升级血统"));
							npcmgr:AddFeature("XT_TMXT2");
							npcmgr:RemoveFeature("XT_TMXT1")
							npc:RemoveModifier("XT_TMXT1")
							me:AddModifier("XT_TMXT2")
							else
							me:AddMsg(XT("[NAME]并未拥有升级血统的前置条件"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",4000)
							world:SetWorldFlag(4448,JQS-1);
							me:AddMsg(XT("[NAME]消耗积分4000，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>觉醒血统（500积分兑换）适用于拥有该体质而没有buff加成的角色</Display>
				<OKResult>
				<![CDATA[	
						local npc = me.npcObj;
						local npcmgr = me.npcObj.PropertyMgr;
						local JF = GameMain:GetMod("ZTWP"):GetItemCount("Item_PTJB")
						local JQD = world:GetWorldFlag(4444)
						local JQC = world:GetWorldFlag(4445)
						local JQB = world:GetWorldFlag(4446)
						local JQA = world:GetWorldFlag(4447)
						local JQS = world:GetWorldFlag(4448)
						if JF >= 500 then
							if npc.LuaHelper:CheckFeature("XT_TMXT2") == true and me:GetModifierStack("WX_XMJX") == 0 then
								me:AddModifier("XT_TMXT2")
								me.npcObj.PropertyMgr:AddModifier("WX_XMJX",1,false,1,false,-1)
								me:AddMsg(XT("[NAME]成功觉醒自身血统"));
							else
								me:AddMsg(XT("[NAME]不具备该血统。"));
							end
							GameMain:GetMod("ZTWP"):SubItemCount("Item_PTJB",500)
							me:AddMsg(XT("[NAME]消耗积分500，剩余积分"..JF.."，剩余\n支线剧情D："..JQD.."个 \n支线剧情C："..JQC.."个 \n支线剧情B："..JQB.."个 \n支线剧情A："..JQA.."个 \n支线剧情S："..JQS.."个"));
						else
							me:AddMsg(XT("积分不足。"));
						end
				]]>		
				</OKResult>
			</li>
			<li>
				<Display>看看其他血统</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧。"))
				me:TriggerStory("WX_XTL");
				</OKResult>
			</li>
			<li>
				<Display>算了，我就看看</Display>
				<OKResult>
				me:AddMsg(XT("[NAME]还是决定放弃融合血统，留给其他人融合吧
				me:TriggerStory("WX_ZSKJ");
				</OKResult>
			</li>
		</Selections>
	</Story>
	
	
	
	
	
	
	
	
	
	
	
	
	
</List></Stories>